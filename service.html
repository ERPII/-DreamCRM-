<input type="text" id="t_cust" placeholder="שם הלקוח" class="w-full p-4 bg-slate-100 rounded-xl mb-4">
<textarea id="t_desc" placeholder="תיאור התקלה" class="w-full p-4 bg-slate-100 rounded-xl mb-4"></textarea>

<button onclick="saveTicket()" class="bg-blue-600 text-white p-4 rounded-xl w-full font-bold">פתח קריאה בשרת</button>

<script type="module">
    import { db } from './app.js';
    import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    window.saveTicket = async () => {
        const cust = document.getElementById('t_cust').value;
        const desc = document.getElementById('t_desc').value;
        if(!cust || !desc) return alert("מלא את כל השדות");

        await addDoc(collection(db, "service_tickets"), {
            customer: cust,
            description: desc,
            status: "חדש",
            createdAt: serverTimestamp()
        });
        alert("נשמר בהצלחה!");
        location.reload();
    };
</script>
